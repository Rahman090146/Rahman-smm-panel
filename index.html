<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Rahman SMM Panel v2</title>
  <style>
    body {
      font-family: "Poppins", sans-serif;
      background: linear-gradient(to bottom, #ffffff, #e8f1ff);
      margin: 0;
      text-align: center;
      color: #222;
    }
    header {
      background: #007bff;
      color: white;
      padding: 20px;
      font-size: 22px;
      font-weight: bold;
      border-radius: 0 0 15px 15px;
    }
    .card {
      background: white;
      border-radius: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      padding: 20px;
      width: 90%;
      max-width: 400px;
      margin: 20px auto;
      text-align: left;
    }
    label {
      display: block;
      margin: 10px 0 5px;
      font-weight: bold;
    }
    input, select {
      width: 100%;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    button {
      width: 100%;
      background: #007bff;
      color: white;
      border: none;
      padding: 12px;
      border-radius: 8px;
      margin-top: 10px;
      font-weight: bold;
    }
    button:hover { background: #005fcc; }
    .saldo {
      background: #f2f7ff;
      padding: 10px;
      border-radius: 10px;
      margin-bottom: 10px;
      font-weight: bold;
      color: #007bff;
    }
    .order-list {
      max-height: 200px;
      overflow-y: auto;
      border-top: 1px solid #ccc;
      margin-top: 10px;
      padding-top: 10px;
    }
    .order-item {
      background: #f8faff;
      border-radius: 8px;
      padding: 10px;
      margin-bottom: 8px;
      border: 1px solid #dde5ff;
    }
  </style>
</head>
<body>
  <header>Rahman SMM Panel ðŸ’™</header>

  <div class="card">
    <div class="saldo">Saldo: <span id="saldo">Rp20.000</span></div>
    <button onclick="topup()">+ Top Up Rp10.000</button>
  </div>

  <div class="card">
    <label>Pilih Layanan</label>
    <select id="layanan" onchange="updateHarga()">
      <option value="subs">YouTube Subscribers</option>
      <option value="views">YouTube Views</option>
      <option value="jam">YouTube Jam Tayang</option>
      <option value="ig">Instagram Followers</option>
    </select>

    <label>Link Video / Akun</label>
    <input id="link" placeholder="Masukkan link video atau akun" />

    <label>Jumlah Pesanan</label>
    <input id="jumlah" type="number" value="100" min="10" onchange="hitungTotal()" />

    <label>Harga per 1000</label>
    <input id="harga" readonly />

    <label>Total Bayar</label>
    <input id="total" readonly />

    <button onclick="pesan()">Order Sekarang</button>
  </div>

  <div class="card">
    <h3>Riwayat Pesanan</h3>
    <div class="order-list" id="riwayat"></div>
  </div>

  <script>
    const hargaLayanan = {
      subs: 15000,
      views: 10000,
      jam: 20000,
      ig: 12000
    };
    let saldo = 20000;
    let riwayat = [];

    function formatRupiah(num) {
      return "Rp" + num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
    }

    function updateHarga() {
      const l = document.getElementById("layanan").value;
      document.getElementById("harga").value = formatRupiah(hargaLayanan[l]) + " / 1000";
      hitungTotal();
    }

    function hitungTotal() {
      const l = document.getElementById("layanan").value;
      const jumlah = parseInt(document.getElementById("jumlah").value);
      const total = Math.ceil((jumlah / 1000) * hargaLayanan[l]);
      document.getElementById("total").value = formatRupiah(total);
    }

    function topup() {
      saldo += 10000;
      document.getElementById("saldo").innerText = formatRupiah(saldo);
      alert("Top up berhasil! Saldo sekarang: " + formatRupiah(saldo));
    }

    function pesan() {
      const layanan = document.getElementById("layanan").options[document.getElementById("layanan").selectedIndex].text;
      const link = document.getElementById("link").value;
      const jumlah = parseInt(document.getElementById("jumlah").value);
      const total = Math.ceil((jumlah / 1000) * hargaLayanan[document.getElementById("layanan").value]);

      if (!link) return alert("Masukkan link dulu!");
      if (saldo < total) return alert("Saldo tidak cukup!");

      saldo -= total;
      document.getElementById("saldo").innerText = formatRupiah(saldo);

      const order = { layanan, link, jumlah, total, waktu: new Date().toLocaleString() };
      riwayat.push(order);
      localStorage.setItem("riwayat", JSON.stringify(riwayat));
      tampilRiwayat();
      alert("Pesanan berhasil dibuat!");
    }

    function tampilRiwayat() {
      const div = document.getElementById("riwayat");
      div.innerHTML = "";
      riwayat.forEach(o => {
        div.innerHTML += `
          <div class="order-item">
            <b>${o.layanan}</b><br>
            ${o.link}<br>
            Jumlah: ${o.jumlah}<br>
            Total: ${formatRupiah(o.total)}<br>
            <small>${o.waktu}</small>
          </div>
        `;
      });
    }

    // Load awal
    if (localStorage.getItem("riwayat")) {
      riwayat = JSON.parse(localStorage.getItem("riwayat"));
      tampilRiwayat();
    }
    updateHarga();
  </script>
</body>
</html>
